<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!--SEARCH -->
        <record id="hrms_recruitment_view_search" model="ir.ui.view">
            <field name="name">hrms.applicant.search</field>
            <field name="model">hr.applicant</field>
            <field name="priority">32</field>
            <field name="arch" type="xml">
                <search string="Candidates Filter">
                    <field string="Applicant" name="partner_name"
                        filter_domain="['|', ('partner_name', 'ilike', self), ('email_from', 'ilike', self)]"/>
                    <field string="Email" name="email_from" filter_domain="[('email_from', 'ilike', self)]"/>
                    <filter string="All" name="candidates"
                            domain="[('active', 'in', [True, False])]" help="Show all candidates"/>
                    <separator/>
                </search>
            </field>
        </record>

        <!--ACTIONS -->
        <record id="hr_applicants_menu_action" model="ir.actions.act_window">
            <field name="name">Candidates</field>
            <field name="res_model">hr.applicant</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="hrms_recruitment.hrms_recruitment_view_search"/>
            <field name="context">{'search_default_candidates': True, 'search_default_current': True}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    No applications have been created yet
                </p>
            </field>
        </record>


        <record model="ir.ui.view" id="hr_applicant_form_view">
            <field name="name">hr.applicant.form.view</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='type_id']" position="after">
                    <field name="current_city_ids"/>
                    <field name="preferred_city_ids"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="hr_applicant_form_view_name">
            <field name="name">hr.applicant.form.view</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <!--                <xpath expr="//h1[@class='d-flex justify-content-between align-items-center']" position="attributes">-->
                <!--                    <attribute name="invisible">1</attribute>-->
                <!--                </xpath>-->
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="required">0</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_name']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='email_from']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_phone']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="hr_applicant_form_view_recruiter">
            <field name="name">hr.applicant.form.view</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='user_id']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="hrms_recruitment_current_ctc" model="ir.ui.view">
            <field name="name">ld.hr.applicant.current.ctc</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//label[@for='salary_expected']" position="before">
                    <field name="current_CTC"/>
                </xpath>
            </field>
        </record>

        <record id="hrms_recruitment_offer" model="ir.ui.view">
            <field name="name">ld.hr.applicant.offer</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group[@name='recruitment_contract']" position="after">
                    <group string="Other INFO">
                        <field name="offer_in_hand" widget="radio"/>
                        <field name="official_notice_period"/>
                        <field name="how_soon_can_be_joined"/>
                        <field name="last_working_day"/>
                        <field name="recruiter_name"/>
                    </group>
                    <group string="">
                        <field name="total_experience"/>
                        <field name="relevant_experience"/>
                        <field name="current_organization"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="hrms_recruitment_attachment" model="ir.ui.view">
            <field name="name">ld.hr.applicant.offer</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='categ_ids']" position="after">
                    <field name="attachment_ids" widget="many2many_binary"/>
                </xpath>
            </field>
        </record>

        <record id="hr_applicant_form_view_send_mail" model="ir.ui.view">
            <field name="name">hr.applicant.form.view.send.mail</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                    <button name="action_open_mail_wizard" type="object" string="Send Mail" class="btn-primary"/>
                </xpath>
            </field>
        </record>

        <record id="hr_applicant_assessment" model="ir.ui.view">
            <field name="name">hr.applicant.assessment</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.hr_applicant_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook" position="inside">
                    <page string="Assessment">
                        <group>
                            <group>
                                <field name="assessment_assigned"/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                                <br/>
                            </group>
                            <group>
                                <button name="action_send_assignment_link" type="object" string="Send Assessment"
                                        class="oe_highlight"/>
                            </group>
                        </group>
                    </page>
                </xpath>
            </field>
        </record>


        <record id="hr_applicant_tree_view" model="ir.ui.view">
            <field name="name">hr.applicant.tree.view</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.crm_case_tree_view_job"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="inside">
                    <header>
                        <button name="%(action_open_send_assessment_wizard)d" type="action" string="Send Assessment"
                                class="oe_highlight" icon="fa-envelope"/>
                    </header>
                </xpath>
            </field>
        </record>

        <record id="view_hr_applicant_tree_inherit" model="ir.ui.view">
            <field name="name">hr.applicant.tree.inherit</field>
            <field name="model">hr.applicant</field>
            <field name="inherit_id" ref="hr_recruitment.crm_case_tree_view_job"/>
            <field name="arch" type="xml">
                <!-- Inserting the job_id field after the name field in the tree view -->
                <xpath expr="//tree/field[@name='name']" position="after">
                    <field name="email_from"/>
                </xpath>
            </field>
        </record>

    </data>
</odoo>

